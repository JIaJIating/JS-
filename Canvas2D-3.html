<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>canvas</title>
    <style>
		canvas{
			border: 1px solid pink;
		}
    </style>
</head>
<body>
<canvas width="200" height="200" id="myCanvas">This is my drawing.</canvas>
<br>
<img src="1.png" alt="">
</body>
<script>
// 阴影
	// var drawing=document.getElementById('myCanvas');
	// if(drawing.getContext){
	// 	var context=drawing.getContext("2d");
	// 	// 设置阴影
	// 	context.shadowOffsetX=5;
	// 	context.shadowOffsetY=5;
	// 	context.shadowBlur=4;   //模糊的像素数
	// 	context.shadowColor="rgba(0,0,0,0.5)";
	// 	// 绘制红色矩形
	// 	context.fillStyle="red";
	// 	context.fillRect(10,10,50,50);
	// 	//绘制蓝色矩形
	// 	context.fillStyle="blue";
	// 	context.fillRect(65,65 ,50,50);
	// }
// 渐变
 //    var drawing=document.getElementById('myCanvas');
	// if(drawing.getContext){
	// 	var context=drawing.getContext("2d");
	// 	var gradient=context.createLinearGradient(30,30,70,70);
	// 	gradient.addColorStop(0,"white");
	// 	gradient.addColorStop(1,"black");
	// 	context.fillStyle=gradient;
	// 	context.fillRect(50,50,50,50);
	// 	// context.fillRect(30,30,50,50); //再试一次
	// }
	
	// 矩形和渐变对象的坐标必须匹配
	// 用辅助方法createRectLinearGradient()可以让坐标容易控制些
	// 	var drawing=document.getElementById('myCanvas');
	// 	if(drawing.getContext){
	// 		var context=drawing.getContext("2d");
	// 		// 所以用函数来确保坐标是否合适
	// 		function createRectLinearGradient(context,x,y,width,height){
	// 			return context.createLinearGradient(x,y,x+width,y+height);
	// 		}
	// 		var gradient=createRectLinearGradient(context,30,30,50,50);
	// 		gradient.addColorStop(0,"white");
	// 		gradient.addColorStop(1,"black");
	// 		// 绘制渐变矩形
	// 		context.fillStyle=gradient;
	// 		context.fillRect(30,30,50,50);
	// 		}
	
// 		创建径向渐变（或放射渐变）：createRadiaGradient()方法：
// 		接受六个参数：起点圆的圆心坐标（x,y）及半径，终点圆的圆心坐标（x,y）及半径
// 		var drawing=document.getElementById('myCanvas');
// 		if(drawing.getContext){
// 			var context=drawing.getContext("2d");
// 			var gradient=context.createRadialGradient(55,55,10,55,55,30);//坐标取30-80中间
// 			gradient.addColorStop(0,"white");
// 			gradient.addColorStop(1,"black");
// 			// 绘制红色矩形
// 			context.fillStyle="red";
// 			context.fillRect(10,10,50,50);
// 			// 绘制渐变矩形
// 			context.fillStyle=gradient;
// 			context.fillRect(30,30,50,50);
// 		}
// 模式：其实就是重复的图像
// 	var drawing=document.getElementById('myCanvas');
// 	if(drawing.getContext){
// 		var context=drawing.getContext("2d");
// 		var image=document.images[0];
// 		var pattern=context.createPattern(image,"repeat");
// 		// 绘制矩形
// 		context.fillStyle=pattern;
// 		context.fillRect(10,10,200,200);	
// 	}
// 使用图像数据：通过getImageData()取得原始图像数据，接受四个参数：
// 要取得其数据的画面区域的x坐标和y坐标、该区域的像素宽度和高度。
// 	var imageData=context.getImageData(10,5,50,50);
// 	返回的imageData实例对象有三个属性：width，height，data
// 	data属性是一个数组，保存着图像中的每一个像素的数据
// 	var data=imageData.data;
// 	 	red=data[0];        //值都介于[0,255]
// 	 	green=data[1];
// 	 	blue=data[2];
// 	 	alpha=data[3];
// 	 可以直接访问到这些数据，就可以通过修改这些图像数据实现一些其他功能
// 	 例如：创建一个简单的灰阶过滤器
		// var drawing=document.getElementById('myCanvas');
		// if(drawing.getContext){
		// 	var context=drawing.getContext("2d"),
		// 		image=document.images[0],
		// 		imageData,data,
		// 		i,len,average,
		// 		red,green,blue,alpha;
		// 	// 绘制原始图像
		// 	context.drawImage(image,0,0);
		// 	// 取得图像数据
		// 	imageData=context.getImageData(0,0,image.width,image.height);
		// 	data=imageData.data;
		// 	// for循环 遍历了图像数据中的每一个像素
		// 	for(i=0,len=data.length;i<len;i+=4){
		// 		red=data[i];
		// 		green=data[i+1];
		// 		blue=data[i+2];
		// 		alpha=data[i+3];
		// 		// 求的rgb平均值
		// 		average=Math.floor((red+green+blue)/3);
		// 		// 设置颜色值，透明度不变
		// 		data[i]=average;
		// 		data[i+1]=average;
		// 		data[i+2]=average;
		// 	}
		// 	// 回写图像数据并显示
		// 	imageData.data=data;
		// 	context.putImageData(imageData,0,0);
		// }
// 合成：两个属性：globalAlpha  globalCompositionOperation
	// var drawing=document.getElementById('myCanvas');
	// if(drawing.getContext){
	// 	var context=drawing.getContext("2d");
	// 	// 绘制红色矩形
	// 	context.fillStyle="red";
	// 	context.fillRect(10,10,50,50);
	// 	// 修改全局透明度
	// 	context.globalAlpha=0.5;
	// 	//绘制蓝色矩形
	// 	context.fillStyle="blue";
	// 	context.fillRect(30,30,50,50);
	// 	// 重置全局透明度 
	// 	context.globalAlpha=0;
	// }
	// 
	// globalCompositionOperation表示后绘制的图形与先绘制的图形怎样结合
	var drawing=document.getElementById('myCanvas');
	if(drawing.getContext){
		var context=drawing.getContext("2d");
		// 绘制红色矩形
		context.fillStyle="red";
		context.fillRect(10,10,50,50);
		// 设置合成操作
		context.globalCompositionOperation="destination-over";
		//绘制蓝色矩形
		context.fillStyle="blue";
		context.fillRect(30,30,50,50);
	}
	// 蓝色本来在红色上方，设置改属性值后，跑到红色下方
</script>
</html>